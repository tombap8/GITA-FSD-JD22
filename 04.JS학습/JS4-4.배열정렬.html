<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
        <style>
            /* 타이틀 */
            .tit,
            .stit {
                text-align: center;
            }
            .showNum img {
                height: 100px;
            }
            .showNum2 span {
                font-size: 64px;
                display: inline-block;
                margin: 0 10px;
                font-family: "궁서";
                color: darkgreen;
            }
            /* 구분박스 */
            .sbx {
                margin: 20px auto;
                padding: 20px;
                border: 5px dotted lightseagreen;
                max-width: 1000px;
            }
            .cont {
                text-align: center;
            }
            /* 선택박스의 박스 */
            .selbx {
                text-align: center;
            }
            .sbx select,input,button {
                margin-bottom: 15px;
                font-size: 24px;
            }

            .sbx table {
                width: 700px;
                border-collapse: collapse;
                border-top: 2px solid #222;
                margin: 0 auto;
            }

            .sbx table th {
                padding: 10px;
                border-bottom: 2px solid #555;
                background-color: #ccc;
            }
            .sbx table td {
                padding: 10px 0;
                border-bottom: 1px solid #888;
            }
            .sbx tbody tr:nth-child(even) {
                background-color: #eeeeee;
            }
            .sbx tbody tr td:first-child {
                text-align: center;
            }
            .sbx tbody tr:last-child td {
                border-bottom: 2px solid #222;
            }
        </style>
        <script>
            /****************************************************************
            https://developer-talk.tistory.com/73
            
                [ JS 배열의 정렬 : sort() 메서드 ]
                -> 용어정의: 정렬이란? 배열의 값을 기준으로 순서를 다시 정하는것!
                배열의 요소 정렬은 sort() 메서드 사용
                sort() 메서드를 사용하여 배열값을 오름차순 또는 내림차순으로 정렬할 수 있음!

                [ sort() 메서드 특징]

                1. 기본정렬: 오름차순(1,2,3,.../a,b,c,...)
                2. 원리: 배열값을 문자열로 캐스팅후 변환된 문자열을 비교하여 순서를 결정
                3. 배열값이 undefined인 경우: 문자열로 변환불가(배열맨끝정렬)

                [ sort() 메서드 비교함수 ]
                -> sort() 메서드 내부에 2개의 전달값을 가지는 함수를 쓰면
                sort메서드 자체에서 값을 비교하여 배열값의 순서를 바꾼다!

                -> 기준정렬 : 오름차순
                sort(function(x,y){
                    if(x>y) return 1;
                    if(x<y) return -1;
                    return 0;
                })
                
                -> 리턴값의 의미
                1) if(x>y) return 1; -> x가 y뒤에 옴 (리턴값이 양수)
                2) if(x<y) return -1; -> x가 y앞에 옴 (리턴값이 음수)
                3) return 0; -> x,y정렬을 유지 (리턴값이 0)
                
                -> 단순형
                sort(function(x,y){
                    return x == y ? 0 : x > y ? -1 : 1;
                })



                -> 배열값이 단순히 숫자이기만 하면 빼기 연산만써도 정렬됨

                sort(function(x,y){
                    return a - b;
                })

                [ 정렬시 데이터 유의사항 ]
                1. 문자형일 경우 대소문자가 섞여있으면 대문자나 소문자중 
                한가지로 변환하여 비교해야함(toUpperCase()/toLowerCase())
                예) 
                배열변수.sort((x, y) {
                let x = x.toUpperCase(),
                    y = y.toUpperCase();
                
                return x == y ? 0 : x > y ? -1 : 1;
                });
                2. 날짜정렬도 숫자와 동일함(날짜데이터 자체가 숫자형으로 되어있음!)
                3. 특정언어의 특수문자일 경우 localeCompare() 메서드로 문자열비교함
                예)  x.localeCompare(y)

                ***************************************************

                [ 배열 검색 : find() / filter() / indexOf() ]

                1. find() 메서드
                (1) 검색후 첫번째 일치값 하나만을 리턴
                (2) 결과가 없으면 undefined 리턴
                (3) 콜백함수구성: function(val,idx,obj){}
                    1) val : 처리중 배열의 값
                    2) idx : 처리중 배열의 순번
                    3) obj : 처리중 배열전체
                (4) 리턴데이터 : 배열의 값 하나(값의 데이터형)
                (5) 활용케이스 : 아이디검사 결과 리턴


                2. filter() 메서드
                (1) 검색후 모든 일치값을 리턴
                (2) 결과가 없으면 undefined 리턴
                (3) 콜백함수구성: function(val,idx,obj){}
                    1) val : 처리중 배열의 값
                    2) idx : 처리중 배열의 순번
                    3) obj : 처리중 배열전체
                (4) 리턴데이터 : 배열형 데이터(하나여도 배열형으로 리턴함!)
                (5) 활용케이스 : 검색 리스트 결과 리턴

                3. LIKE 검색방법 : 값의 일부만 넣어도 검색되는 방법
                -> indexOf(값)을 사용함!
                문자열 값이 없으면 -1을 리턴하므로 -1이 아닌경우를 사용함!

            ***************************************************************/
            const org_num = [4, 5, 8, 10, 2, 1, 9, 3, 7, 6];
            const org_num2 = ["파", "타", "하", "가", "바", "사", "다", "라", "차"];

            window.addEventListener("DOMContentLoaded", () => {
                const newArray = (obj) => {
                    let temp = obj.map(
                        (x) => `<img src="./images/num/num_0${x}.png" alt="Number">`
                    );
                    document.querySelector(".showNum").innerHTML = temp.join("");
                };
                const newArray2 = (obj) => {
                    let temp = obj.map((x) => `<span>${x}</span>`);
                    document.querySelector(".showNum2").innerHTML = temp.join("");
                };

                newArray(org_num);
                newArray2(org_num2);

                document.querySelector(".sel").onchange = () => {
                    let opt = event.currentTarget.value;
                    if (opt == 1) {
                        console.log(
                            newArray(
                                // org_num.sort(function (a, b) {
                                //     if (a > b) return 1;
                                //     if (a === b) return 0;
                                //     if (a < b) return -1;
                                // })
                                org_num.sort(function (a, b) {
                                    return a - b;
                                })
                            )
                        );
                    } else if (opt == 2) {
                        console.log(
                            newArray(
                                org_num.sort(function (a, b) {
                                    return b - a;
                                })
                            )
                        );
                    }
                };

                document.querySelector(".sel2").onchange = e => {
                    let opt = e.target.value;
                    if (opt == 1) {
                        org_num2.sort((x, y) => {
                            if (x > y) return 1;
                            if (x === y) return 0;
                            if (x < y) return -1;
                        });
                        // org_num2.sort(function (a, b) {
                        //     return a - b;
                        // })
                    } else if (opt == 2) {
                        org_num2.sort((x, y) => {
                            if (x < y) return 1;
                            if (x === y) return 0;
                            if (x > y) return -1;
                        });
                    }
                    newArray2(org_num2);
                };

                const list1 = [
                    {
                        idx: 8,
                        tit: "나는 구누?",
                        cont: "공동구매) 슬로건 공구 (계좌와 네이버폼)",
                    },
                    {
                        idx: 4,
                        tit: "여기는 어디?",
                        cont: "총공 공지] 오늘부터 일 2회, 총공 진행합니다",
                    },
                    {
                        idx: 1,
                        tit: "나야나",
                        cont: "연합 갈라 서포트 계좌오픈",
                    },
                    {
                        idx: 15,
                        tit: "이제 얼마나 남은거니?",
                        cont: "음악프로그램에 출연 요청글도 써볼까요?",
                    },
                ]; /////////////// list1 /////////////
                const list2 = [
                    {
                        idx: 15,
                        tit: "당근마켓에 가자",
                        cont: "ㄷㄷㄷㄷㄷㄷabcㄷㄷㄷㄷㄷㄷ",
                    },
                    {
                        idx: 74,
                        tit: "점심에 뭐먹지?",
                        cont: "오스틴님 생일 서포트 안내",
                    },
                    {
                        idx: 18,
                        tit: "직돌이는 쉬고싶다~!",
                        cont: "활동정지에 대한 파생글 무통보 삭제 및 경고",
                    },
                    {
                        idx: 104,
                        tit: "올해는 다른 회사로 이직한다!",
                        cont: "⚜️갈라콘 서포트에 많은 참여 부탁드립니다!",
                    },
                ]; /////////////// list2 /////////////

                const htc = list1.map(
                    (v) => `
                        <tr>
                            <td>
                                ${v.idx}
                            </td>
                            <td>
                                ${v.tit}
                            </td>
                            <td>
                                ${v.cont}
                            </td>
                        </tr>
                    `
                );
                document.querySelector(".showList3").innerHTML = `
                        <table>
                            <thead>
                                <tr>
                                    <th>번호</th>
                                    <th>제목</th>
                                    <th>내용</th>
                                    </tr>
                                </thead>
                            <tbody>
                                ${htc.join("")}
                            </tbody>
                        </table>
                    `;

                document.querySelector("#sel3").onchange = (e) => {
                    let opt = e.target.value;
                    let cta = document.querySelector(".cta3").value;
                    console.log(opt, cta);
                    if (opt == 1) {
                        list1.sort(function (x, y) {
                            return x[cta] === y[cta] ? 0 : x[cta] < y[cta] ? -1 : 1;
                        });
                    } ///// if /////
                    else if (opt == 2) {
                        list1.sort(function (x, y) {
                            return x[cta] === y[cta] ? 0 : x[cta] < y[cta] ? 1 : -1;
                        });
                    }

                    const htc = list1.map(
                        (v) => `
                                <tr>
                                    <td>
                                        ${v.idx}
                                    </td>
                                    <td>
                                        ${v.tit}
                                    </td>
                                    <td>
                                        ${v.cont}
                                    </td>
                                </tr>
                            `
                    );
                    console.log(list1);
                    document.querySelector(".showList3").innerHTML = `
                        <table>
                            <thead>
                                <tr>
                                    <th>번호</th>
                                    <th>제목</th>
                                    <th>내용</th>
                                    </tr>
                                </thead>
                            <tbody>
                                ${htc.join("")}
                            </tbody>
                        </table>
                    `;
                }; //////////////// onchange ///////////////////

                const htc2 = list2.map(
                    (v) => `
                                <tr>
                                    <td>
                                        ${v.idx}
                                    </td>
                                    <td>
                                        ${v.tit}
                                    </td>
                                    <td>
                                        ${v.cont}
                                    </td>
                                </tr>
                            `
                );
                console.log(list2);

                

                document.querySelector(".showList4").innerHTML = `
                                <table>
                                    <thead>
                                        <tr>
                                            <th>번호</th>
                                            <th>제목</th>
                                            <th>내용</th>
                                            </tr>
                                        </thead>
                                    <tbody>
                                        ${htc2.join("")}
                                    </tbody>
                                </table>
                                `;
                   document.querySelector(".sample").onclick = () => {

                       // 정확한 검색
                      let res1 = list2.find((v,i)=>{
                          if(v.tit=="당근마켓에 가자") return true;
                       })
                       
                       console.log("검색어:'당근마켓에 가자'\n결과:",res1,"\n타입:",typeof res1);
    
                       // like 검색 : find() 사용 - 단일배열값리턴(타입:배열값형)
                      let res2 = list2.find((v,i)=>{
                          if(v.tit.indexOf("다")!==-1) return true;
                       })
                       
                       console.log("검색어:'다'\n결과:",res2,"\n타입:",typeof res2);
    
                       // like 검색 : filter() 사용 - 다중배열값리턴(타입:배열형)
                      let res3 = list2.filter((v,i)=>{
                          if(v.tit.indexOf("당근")!==-1) return true;
                       })
                       
                       console.log("검색어:'당근'\n결과:",res3,"\n타입:",typeof res3);

                   }; //////////////// sample ////////////////


                   // 검색버튼 클릭시 검색 결과 보이기
                   document.querySelector(".sbtn").onclick = () => {
                    // 1. 검색어 가져오기 : #stxt
                    let stxt = document.querySelector("#stxt").value;
                    if(stxt=="") {
                        alert("검색어를 넣어주세요~!^^");
                        return;
                    } //////// if ////////////

                    // 2. 검색조건 가져오기 : .cta4
                    let cta = document.querySelector(".cta4").value;
                    console.log("검색기준:",cta);

                    // 3. 다중값 리턴 LIKE검색
                    // filter() + indexOf() 사용!!!
                    let res = list2.filter((v,i)=>{
                        if(String(v[cta]).indexOf(stxt)!==-1) return true;
                    }); /////////// filter ///////////

                    console.log("결과:",res);
                    
                    // 4. 검색결과가 있으면 출력
                    if(res.length!=0){
                        const htc = res.map(
                            (v) => `
                                <tr>
                                    <td>
                                        ${v.idx}
                                    </td>
                                    <td>
                                        ${v.tit}
                                    </td>
                                    <td>
                                        ${v.cont}
                                    </td>
                                </tr>
                            `
                        );



                        document.querySelector(".showList4").innerHTML = `
                                <table>
                                    <thead>
                                        <tr>
                                            <th>번호</th>
                                            <th>제목</th>
                                            <th>내용</th>
                                            </tr>
                                        </thead>
                                    <tbody>
                                        ${htc.join("")}
                                    </tbody>
                                </table>
                                `;

                    } ////////////// if : 결과있음 ////////
                    else{

                        document.querySelector(".showList4").innerHTML = `
                                <table>
                                    <thead>
                                        <tr>
                                            <th>번호</th>
                                            <th>제목</th>
                                            <th>내용</th>
                                            </tr>
                                        </thead>
                                    <tbody>
                                        <tr>
                                            <td colspan="3">
                                                결과값이 없습니다
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                `;

                    } //////////// else : 결과없음 /////////



                   }; ///////////// 검색버튼 //////////////////


                   const list3 = {
                    item1:{
                        idx: 15,
                        tit: "당근마켓에 가자",
                        cont: "ㄷㄷㄷㄷㄷㄷabcㄷㄷㄷㄷㄷㄷ",
                    },
                    item2:{
                        idx: 74,
                        tit: "점심에 뭐먹지?",
                        cont: "오스틴님 생일 서포트 안내",
                    },
                    item3:{
                        idx: 18,
                        tit: "직돌이는 쉬고싶다~!",
                        cont: "활동정지에 대한 파생글 무통보 삭제 및 경고",
                    },
                    item4:{
                        idx: 104,
                        tit: "올해는 다른 회사로 이직한다!",
                        cont: "⚜️갈라콘 서포트에 많은 참여 부탁드립니다!",
                    },
                }; /////////////// list3 /////////////

                console.log(list3);
                let newobj = Object.keys(list3);
                // let newobj = Object.keys(list3).map(v=>list3[v]);
                console.log(newobj);
                console.log(newobj.reverse());
                newobj = newobj.map(v=>list3[v]);
                console.log(newobj);

                                
            }); ///////////// load ///////////////////////
        </script>
    </head>
    <body>
        <h1 class="tit">[ 🏢배열의 정렬🏰 ]</h1>

        <h2 class="stit">🌊숫자로만된 배열의 정렬</h2>
        <div class="sbx">
            <div class="selbx">
                <select name="sel" id="sel" class="sel">
                    <option value="0">정렬선택</option>
                    <option value="1">오름차순</option>
                    <option value="2">내림차순</option>
                </select>
            </div>
            <div class="showNum cont"></div>
        </div>

        <h2 class="stit">🛕문자데이터 배열의 정렬</h2>
        <div class="sbx">
            <div class="selbx">
                <select name="sel2" id="sel2" class="sel2">
                    <option value="0">정렬선택</option>
                    <option value="1">오름차순</option>
                    <option value="2">내림차순</option>
                </select>
            </div>
            <div class="showNum2 cont"></div>
        </div>

        <h2 class="stit">👨‍👩‍👦‍👦객체데이터 배열의 정렬</h2>
        <div class="sbx">
            <div class="selbx">
                <select name="cta3" id="cta3" class="cta3">
                    <option value="idx">idx</option>
                    <option value="tit">tit</option>
                    <option value="cont">cont</option>
                </select>
                <select name="sel3" id="sel3" class="sel3">
                    <option value="0">정렬선택</option>
                    <option value="1">오름차순</option>
                    <option value="2">내림차순</option>
                </select>
            </div>
            <div class="showList3"></div>
        </div>

        <h2 class="stit">🏸객체데이터 검색후 배열의 정렬</h2>
        <div class="sbx">
            <div class="selbx">
                <select name="cta4" id="cta4" class="cta4">
                    <option value="idx">idx</option>
                    <option value="tit">tit</option>
                    <option value="cont">cont</option>
                </select>
                <select name="sel4" id="sel4" class="sel4">
                    <option value="0">정렬선택</option>
                    <option value="1">오름차순</option>
                    <option value="2">내림차순</option>
                </select>
                <input id="stxt" type="text" maxlength="50" />
                <button class="sbtn">검색</button>
                <button class="sample">샘플</button>
            </div>
            <div class="showList4"></div>
        </div>
    </body>
</html>
