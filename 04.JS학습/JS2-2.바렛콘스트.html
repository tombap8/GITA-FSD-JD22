<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <title>JS2-2. 바(var),렛(let),콘스트(const)</title>
    <script>
        /******************************************** 

            변수는 바.렛.콘스트!!!

            [ var ] : 함수영역변수

            1. 함수영역에서 사용할때만 지역변수,
            바깥쪽은 전역변수다!
            __________________________________

            (지역변수)
            지역변수는 바깥영역에서는 이 변수를 모름
            - 다른 함수나 바깥영역에서는 이 변수를 
            참조할 수 없다!

            (전역변수)
            전역변수는 함수 바깥에 선언되어 있어서 
            어떤 함수에서도 그 변수를 참조하여 쓸 수 있다!
            _______________________________________

            2. 전역변수와 같은 이름의 변수를 함수에서
            값을 주면 덮어쓰기가 된다!

            3. 함수영역에서 전역변수와 같은 이름의 변수를
            선언하면 전역변수와 다른 지역변수로 관리된다!
            (이렇게 하면 코딩이 매우 혼란스러워진다!)
            또는 변수이름을 같은 이름이지만 지역변수로
            사용할 수 있으므로 장점이 되기도 함!


            ***************************************

            [ let ] : 블록영역변수 (중괄호는 모두 블록임!)

            1. let으로 변수를 만들면 전역과 지역을 별도로
                관리하여 같은 이름변수도 별개의 변수로 인식함!

            2. let 변수는 선언 후에 아래쪽에서 사용해야 
                호출할 수 있다 (var는 위에서 호출하고 아래서 선언
                할 수 있다 -> 호이스팅!)

            3. 같은 영역에 같은 이름의 변수를 
                중복 선언 할 수 없다!

            ****************************************

            [ const ] : 상수(constant) -> 변하지 않는값

            1. 선언과 동시에 할당해야함!

            2. 한번 할당한 값은 변경불가!

            3. 배열과 객체, 함수를 상수로 만드는 경우가 많다!
            -> 변경불가는 각 배열형, 객체형, 함수형
            -> 변경가능은 각 배열값, 객체값, 함수전달값

            4. 기타의 특징은 let과 동일함!(블록단위변수)


        ********************************************/


        ///////////////////////////////////////////////
        /////////////// var 테스트 ////////////////////
        //////////////////////////////////////////////
        // JS에서 중괄호{}란? -> 코드를 묶어주는 영역

        // 1. 함수 중괄호에서 var //////
        function callMe() {

            // 함수내 변수는 지역변수
            var usa = "미국";

            // 함수내에서 전역변수 korea값 변경
            korea = "코리아";

            // 함수내에서 korea 값 변경 후
            console.log("함수내에서 korea변수 값 변경 후:", korea);


            // 전역변수 uk와 같은 이름의 지역변수를 선언하고 할당하면?
            var uk = "유케이";
            // 전역변수가 같은 이름의 지역변수 때문에
            // 전역변수를 호출할 수 없다!!!
            // -> 이것은 같은 이름의 전역변수를 쓸 수 있으므로
            // 장점으로 볼 수 있다!!!
            


            // 함수내에서 전역변수uk -> 지역변수로 다시
            // 선언하여 할당한 후에는 지역변수임!
            console.log("함수내에서 전역변수uk변수:", uk);


        } ////// callMe 함수 /////

        // 함수 바깥에서 변수선언과 할당하기!
        var korea = "한국";
        var uk = "영국";

        // 바깥에서 korea - 함수호출전
        console.log("바깥에서 korea변수 함수호출전:", korea);

        // 바깥에서 함수호출전 전역변수uk
        console.log("바깥에서 함수호출전 전역변수uk변수:", uk);

        // 바깥에서 usa - 함수호출전 -> 에러!
        // console.log("바깥에서 usa변수 함수호출전:",usa);
        
        // callMe() 함수호출!
        callMe();
        
        // 바깥에서 함수호출후 전역변수uk
        console.log("바깥에서 함수호출후 전역변수uk변수:", uk);

        // 바깥에서 usa - 함수호출후 -> 역시 에러!
        // 함수내 지역변수 이므로 바깥에서 참조 못함!
        // console.log("바깥에서 usa변수 함수호출후:",usa);


        // 바깥에서 korea - 함수호출후
        console.log("바깥에서 korea변수 함수호출후:", korea);

        ////////////////////////////////////////////////////

        /// 2. if문에서 중괄호 var ////////
        if (true) {
            var who = "누구?";
            console.log("if문안 who:", who);
        } /////// if ////////

        console.log("if문밖 who:", who);
        // if문의 중괄호 안에서 변수를 선언하면
        // 전역변수와 같다! 즉, 지역변수아님!!!

        /// 3. for문 중괄호 var /////////////
        for (var i = 3; i > 0; i--) {
            console.log("for문안 i:", i);
        } ////////// for /////////////

        console.log("for문밖 i:", i);
        // for문 안에서 선언한 변수를 바깥에서 참조할 수 있다!
        // 즉, 전역변수와 같다!

        // ->>>>>> 결론!!!
        // ->>>>>> var는 오직 함수의 중괄호에서만 선언시 지역변수가 된다!!!

        ////////////////////////////////////////////////
        //////////// let, const 테스트 //////////////////
        /////////////////////////////////////////////////

        var seoul = "서울";
        var jeju = "제주도";
        let toktok = "카톡";
        let sport = "축구";

        //// 중괄호로 블록영역을 만들어 본다! ///////////
        /***********************************************/
        {
            // 블록내부에서 전역변수 찍기! 앞
            console.log("블록내부에서 전역변수 찍기! 앞");
            console.log("seoul:", seoul);

            // console.log("jeju:", jeju); -> 에러남!

            // 지역 아래에서 let으로 같은 이름의 전역변수를 
            // 선언하여 할당하면 이 지역에서 지역변수가 되므로
            // 위에서 미리 호출할 수 없다! -> let의 장점1
            // -> 에러 메시지:
            // Uncaught ReferenceError: 
            // Cannot access 'jeju' before initialization
            // -> 선언하여 초기화 하기 전에는 접근불가 에러남!

            // console.log("toktok:", toktok); -> 에러남!

            // 아래에서 let 선언하였으므로 지역변수가 되고
            // 순서상 위에서 호출불가!

            console.log("sport:", sport);

            // 블록에서 변수 재선언하기! //////////
            var seoul = "강남구";
            // -> 전역변수가 다시 선언되어 할당된 결과임!
            // 문제: 전역변수가 중간에 다시 선언되어 변경되므로
            // 코드 관리상 혼선이 오게 되는 치명적 단점이 된다!

            let jeju = "마라도";
            // 전역변수 var로 선언된 같은 이름의 변수를
            // let으로 블록영역에서 선언하여 할당하면?
            

            let toktok = "라인";
            // 전역변수 let으로 선언된 같은 이름의 변수를
            // let으로 블록영역에서 선언하여 할당하면?
            // -> 에러나는 이유는 jeju와 동일함!
            

            // var sport = "배구"; 

            // let으로 이미 전역변수에 선언된 변수를 var로 재선언하면?
            // let으로 전역변수 선언한 것을 안에서 다시
            // var로 선언할 경우 전역변수를 다시 덮어쓰지 못하게
            // let에서 변수를 관리함!!!
            // -> 에러메시지:
            // Uncaught SyntaxError: -> 문법에러!
            // Identifier 'sport' has already been declared
            // -> 이미선언된 전역변수를 다시 전역으로 덮을 수 없다!

            myitem = "곰인형";
            // 선언없이 변수를 할당하면?
            // 기본적으로 var로 선언하여 자동으로 전역변수에 등록함
            // 함수안에서도 선언없이 변수를 쓰면 이렇게 된다!
            // 매우 변수관리가 어려워짐!!! 나쁜케이스!!!

            // 블록내부에서 전역변수 찍기! 뒤
            console.log("블록내부에서 전역변수 찍기! 뒤");
            console.log("seoul:", seoul);
            console.log("jeju:", jeju);
            console.log("toktok:", toktok);
            console.log("sport:", sport);
            console.log("myitem:", myitem);

        }
        /***********************************************/

        // 전역에서 전역변수 찍기!
        console.log("전역에서 전역변수 찍기!");
        console.log("seoul:", seoul);
        console.log("jeju:", jeju);
        console.log("toktok:", toktok);
        console.log("sport:", sport);
        console.log("myitem:", myitem);

        ///////////////////////////////////////////////

        //// 변수 호이스팅(hoisting) ////
        cat = "고양이"; // 변수할당먼저함
        console.log("cat:",cat);
        var cat; // 변수의 선언을 나중에함!
        // 변수의 선언을 할당 후에 할 수 있는 것을
        // 변수 호이스팅 이라고함!(var 인 경우 사용됨!)
        // 문제: 코딩순서에 혼란이 야기됨!

        // let을 사용하여 변수 호이스팅 금지!!!
        let dog; 
        dog = "강아지";
        console.log("dog:",dog);
        // let dog; -> 선언을 아래에서 하면 에러남!
        // Uncaught ReferenceError: 
        // Cannot access 'dog' before initialization
        // -> 선언전에 접근불가! 호출불가! 코딩 순서 철저!
        // -> 변수 선언과 할당 순서 지킴 -> let사용이유2

        // 같은 지역에서 선언한 let변수를 같은 이름으로
        // 다시 선언할 경우는?
        // let dog = "시바견"; -> 같은 이름 사용불가!
        // ->let사용이유3
        var cat = "먼치킨"; // var는 가능함!


        //////////// 상수 테스트 //////////////////
        const fish = "고등어";
        // 원칙1 : 상수는 선언과 동시에 할당해야함!
        console.log("상수 fish:",fish);
        
        // 원칙2 : 상수는 선언시 할당후 재할당 불가!
        // fish = "참치"; -> 에러남!
        // console.log("상수 fish:",fish);
        // -> 에러 메시지:
        // Uncaught TypeError: Assignment to constant variable.

        // 일반적으로 상수는 변경하면 안되는 값을 담을 때 사용함!
        // -> 배열, 객체, 함수와 같이 데이터형이 선언시에 할당후
        // 변경되면 안되는 경우 const를 사용함! -> 많이 사용됨! 매우!
        
        ////////////////////////////////////////////////////
        /////////// const의 활용 : 배열,객체,함수 ///////////
        ////////////////////////////////////////////////////

        // -> 배열, 객체, 함수의 내부값은 얼마든지 변경가능!
        // 그.러.나... 한번할당한 데이터형은 변경불가!(새로할당불가!)

        // 배열
        const arr = ["상추","고기","마늘"];

        // 객체
        const obj = {"내이름":"김수현"};

        // 함수
        const fn = function(){console.log("나함수!")}

        

    </script>
</head>

<body>

</body>

</html>